import sys

# Base de datos simulada
recetas_db = [
    {
        "nombre": "Tarta de Chocolate",
        "descripcion": "Una deliciosa tarta de chocolate.",
        "preparacion": "Mezclar ingredientes, hornear por 30 minutos.",
        "ingredientes": {"Harina": "200g", "Chocolate": "100g", "Huevos": "2"},
        "tiempo_preparacion": 40,
        "valoraciones": [5, 4, 5]
    },
    # Puedes añadir más recetas aquí...
]

def mostrar_recetas():
    print("\n--- Lista de Recetas ---")
    for receta in recetas_db:
        promedio = sum(receta["valoraciones"]) / len(receta["valoraciones"]) if receta["valoraciones"] else 0
        print(f"Nombre: {receta['nombre']}, Tiempo: {receta['tiempo_preparacion']} mins, Valoración Promedio: {promedio:.1f} estrellas")

def buscar_receta():
    nombre = input("Ingresa el nombre del postre: ").strip().lower()
    coincidencias = [r for r in recetas_db if nombre in r["nombre"].strip().lower()]
    if coincidencias:
        print("\n--- Recetas Encontradas ---")
        for i, receta in enumerate(coincidencias, 1):
            print(f"{i}. {receta['nombre']}")
        seleccionar_receta(coincidencias)
    else:
        print("No se encontraron recetas con ese nombre.")

def seleccionar_receta(coincidencias):
    opcion = int(input("Selecciona el número de la receta que deseas visualizar: ")) - 1
    receta = coincidencias[opcion]
    visualizar_receta(receta)

def visualizar_receta(receta):
    print(f"\n--- {receta['nombre']} ---")
    print(f"Descripción: {receta['descripcion']}")
    print(f"Preparación: {receta['preparacion']}")
    print(f"Ingredientes: {receta['ingredientes']}")
    print(f"Tiempo de Preparación: {receta['tiempo_preparacion']} mins")
    promedio = sum(receta["valoraciones"]) / len(receta["valoraciones"]) if receta["valoraciones"] else 0
    print(f"Valoración Promedio: {promedio:.1f} estrellas")
    opcion = input("¿Deseas dejar una valoración? (s/n): ").strip().lower()
    if opcion == 's':
        dejar_valoracion(receta)

def dejar_valoracion(receta):
    valoracion = int(input("Ingresa una valoración (1-5): "))
    receta["valoraciones"].append(valoracion)
    print("¡Gracias por tu valoración!")

def crear_receta():
    print("\n--- Crear Nueva Receta ---")
    nombre = input("Nombre del postre: ").strip()
    descripcion = input("Descripción: ").strip()
    preparacion = input("Preparación: ").strip()
    tiempo_preparacion = int(input("Tiempo de preparación (minutos): "))
    ingredientes = {}
    while True:
        ingrediente = input("Ingrediente (o presiona Enter para finalizar): ").strip()
        if not ingrediente:
            break
        cantidad = input(f"Cantidad de {ingrediente}: ").strip()
        ingredientes[ingrediente] = cantidad

    receta = {
        "nombre": nombre,
        "descripcion": descripcion,
        "preparacion": preparacion,
        "ingredientes": ingredientes,
        "tiempo_preparacion": tiempo_preparacion,
        "valoraciones": []
    }
    recetas_db.append(receta)
    print(f"Receta {nombre} creada exitosamente!")

def salir():
    print("Gracias por usar el programa. ¡Hasta luego!")
    print("Autor: [Tu Nombre]")
    sys.exit()

def menu_principal():
    while True:
        print("\n--- Menú Principal ---")
        print("1. Mostrar recetas existentes")
        print("2. Buscar receta")
        print("3. Crear receta")
        print("4. Salir")
        opcion = input("Selecciona una opción: ").strip()
        if opcion == '1':
            mostrar_recetas()
        elif opcion == '2':
            buscar_receta()
        elif opcion == '3':
            crear_receta()
        elif opcion == '4':
            salir()
        else:
            print("Opción no válida, intenta de nuevo.")

if __name__ == "__main__":
    menu_principal()
